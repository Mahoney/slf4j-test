<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2014-05-15 
 | Rendered using Apache Maven Fluido Skin 1.3.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20140515" />
    <meta http-equiv="Content-Language" content="en" />
    <title>SLF4J Test - </title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.3.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.3.1.min.js"></script>

    
              <!-- Google Analytics -->
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-15938495-2']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
          </head>
        <body class="topBarDisabled">
          
    
    
            
    
    
    <a href="http://github.com/Mahoney/slf4j-test">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>SLF4J Test</h2>
                </div>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2014-05-15
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 1.2.0-SNAPSHOT
                      </li>
                      
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span3">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <i class="none"></i>
        Introduction</a>
            </li>
                
      <li class="active">
  
            <a href="#"><i class="none"></i>Usage</a>
          </li>
                
      <li>
  
                          <a href="changelog.html" title="Changelog">
          <i class="none"></i>
        Changelog</a>
            </li>
                              <li class="nav-header">Previous Versions</li>
                              
      <li>
  
                          <a href="site-versions/1.0.1/" title="1.0.1">
          <i class="none"></i>
        1.0.1</a>
            </li>
                
      <li>
  
                          <a href="site-versions/1.0.0/" title="1.0.0">
          <i class="none"></i>
        1.0.0</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                                          
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <i class="icon-chevron-right"></i>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <i class="icon-chevron-right"></i>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span9" >
                                  
            <div class="section">
<h2>Usage<a name="Usage"></a></h2>
<div class="section">
<h3>Making Assertions<a name="Making_Assertions"></a></h3>
<p>TestLoggerFactory is the underlying implementation to which SLF4J&#x2019;s LoggerFactory delegates when SLF4J Test is the bound SLF4J implementation. The getLogger method on TestLoggerFactory returns the same Logger instance as that on LoggerFactory, but with the additional type information to allow retrieval of the LoggingEvents that have occurred against that Logger.</p>
<p>SLF4J Test provides a comprehensive set of static factory methods on LoggingEvent to facilitate easy construction of expected events for comparison against those that were actually received, and LoggingEvent has appropriate equals, hashCode and toString implementations for this purpose. See the <a href="./index.html">front </a> page for an example of using the <a href="./xref/uk/org/lidalia/slf4jtest/TestLogger.html#L268">info static factory method </a>to create an expected LoggingEvent.</p></div>
<div class="section">
<h3>Setting the Log Level on a Logger<a name="Setting_the_Log_Level_on_a_Logger"></a></h3>
<p>SLF4J Test only stores events for levels which are marked as enabled on the Logger. By default all levels are enabled; however, this can be programatically changed on a per logger basis using the following functions:</p>

<div class="source">
<pre>Logger.setEnabledLevels(Level... levels)
Logger.setEnabledLevelsForAllThreads(Level... levels)
</pre></div>
<p>It&#x2019;s important to note that SLF4J does <i>not</i> imply any relationship between the levels - it is perfectly possible for a logger to be enabled for INFO but disabled for ERROR as far as SLF4J is concerned, and hence as far as SLF4J Test is concerned, notwithstanding the fact that implementations such as Logback and Log4J do not permit this. If you wish to test using these common configurations, you should use the constants defined in uk.org.lidalia.slf4jext.ConventionalLevelHierarchy.</p></div>
<div class="section">
<h3>Resetting Stored State<a name="Resetting_Stored_State"></a></h3>
<p>In order to have robust tests the in memory state of SLF4J Test must be in a known state for each test run, which in turn implies that a test should clean up after itself. The simplest way to do so is via a call to  TestLoggerFactory.clear() in a tear down method of some kind. If you are using JUnit then SLF4J Test provides a Rule that will do this for you if you provide the following line in your test class:  @Rule public TestLoggerFactoryResetRule testLoggerFactoryResetRule = new TestLoggerFactoryResetRule();</p>
<p>More nuanced state resetting can be done on a per logger basis:  TestLogger.clear() or more aggressive clears will reset state across all threads:  TestLoggerFactory.clearAll()  TestLogger.clearAll()</p></div>
<div class="section">
<h3>Parallel Testing<a name="Parallel_Testing"></a></h3>
<p>SLF4J Test is designed to facilitate tests run in parallel. Because SLF4J Loggers are commonly shared across threads, the SLF4J Test implementation maintains its state in ThreadLocals. The following functions:</p>

<div class="source">
<pre>TestLogger.getLoggingEvents()
TestLogger.clear()
TestLogger.getEnabledLevels()
TestLogger.setEnabledLevels(Level... levels)
TestLoggerFactory.getLoggingEvents()
TestLoggerFactory.clear()
</pre></div>
<p>all only affect state stored in a ThreadLocal, and thus tests which use them can safely be parallelised without any danger of concurrent test runs affecting each other.</p></div>
<div class="section">
<h3>Testing Multiple Threads Logging<a name="Testing_Multiple_Threads_Logging"></a></h3>
<p>At times, however, it may be desirable to assert about the log messages produced by concurrent code. To facilitate this SLF4J Test also maintains a record of logging events from <i>all</i> threads. This state can be accessed and reset using the following functions:</p>

<div class="source">
<pre>TestLogger.getAllLoggingEvents()
TestLogger.clearAll()
TestLogger.setEnabledLevelsForAllThreads(Level... levels)
TestLoggerFactory.getAllLoggingEvents()
TestLoggerFactory.clearAll()
</pre></div></div>
<div class="section">
<h3>Printing log statements to System out and err<a name="Printing_log_statements_to_System_out_and_err"></a></h3>
<p>It can still be useful to print log messages to System out/err as appropriate. SLF4J Test will print messages using a standard (non-configurable) format based on the value of the TestLoggerFactory&#x2019;s printLevel property. For convenience this does respect the conventional level hierarchy where if the print level is INFO logging events at levels WARN and ERROR will also be printed. This can be set in any of the following ways:</p>
<div class="section">
<h4>Programatically<a name="Programatically"></a></h4>

<div class="source">
<pre>TestLoggerFactory.getInstance().setPrintLevel(Level.INFO);
</pre></div></div>
<div class="section">
<h4>Via a System Property<a name="Via_a_System_Property"></a></h4>
<p>Run the JVM with the following:</p>

<div class="source">
<pre>-Dslf4jtest.print.level=INFO
</pre></div></div>
<div class="section">
<h4>Via a properties file<a name="Via_a_properties_file"></a></h4>
<p>Place a file called slf4jtest.properties on the classpath with the following line in it:</p>

<div class="source">
<pre>print.level=INFO
</pre></div></div></div></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                              <p >Copyright &copy;                   2014.
          All rights reserved.      
                    
      </p>
        </div>

        
        
                </div>
    </footer>
        </body>
</html>